{"version":3,"sources":["turbopack:///[project]/components/ui/fade-in.tsx","turbopack:///[project]/components/facebook-comments.tsx"],"sourcesContent":["\"use client\"\n\nimport { motion, HTMLMotionProps } from \"framer-motion\"\nimport { ReactNode } from \"react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface FadeInProps extends HTMLMotionProps<\"div\"> {\n  children: ReactNode\n  delay?: number\n  duration?: number\n  className?: string\n  direction?: \"up\" | \"down\" | \"left\" | \"right\" | \"none\"\n}\n\nexport function FadeIn({\n  children,\n  delay = 0,\n  duration = 0.5,\n  className,\n  direction = \"up\",\n  ...props\n}: FadeInProps) {\n  const getInitial = () => {\n    switch (direction) {\n      case \"up\": return { opacity: 0, y: 40 }\n      case \"down\": return { opacity: 0, y: -40 }\n      case \"left\": return { opacity: 0, x: 40 }\n      case \"right\": return { opacity: 0, x: -40 }\n      case \"none\": return { opacity: 0 }\n      default: return { opacity: 0, y: 40 }\n    }\n  }\n\n  const getAnimate = () => {\n    switch (direction) {\n      case \"up\": return { opacity: 1, y: 0 }\n      case \"down\": return { opacity: 1, y: 0 }\n      case \"left\": return { opacity: 1, x: 0 }\n      case \"right\": return { opacity: 1, x: 0 }\n      case \"none\": return { opacity: 1 }\n      default: return { opacity: 1, y: 0 }\n    }\n  }\n\n  return (\n    <motion.div\n      initial={getInitial()}\n      whileInView={getAnimate()}\n      viewport={{ once: true, margin: \"-50px\" }}\n      transition={{ duration, delay, ease: \"easeOut\" }}\n      className={cn(className)}\n      {...props}\n    >\n      {children}\n    </motion.div>\n  )\n}\n","\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { useTheme } from \"next-themes\";\n\ndeclare global {\n  interface Window {\n    FB: {\n      XFBML: {\n        parse: (node?: HTMLElement) => void;\n      };\n      init: (options: any) => void;\n    };\n  }\n}\n\ninterface FacebookCommentsProps {\n  url: string;\n}\n\nexport function FacebookComments({ url }: FacebookCommentsProps) {\n  const { theme } = useTheme();\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [status, setStatus] = useState<'loading' | 'loaded' | 'error'>('loading');\n\n  useEffect(() => {\n    // 1. Define the parsing logic\n    const parseXFBML = () => {\n      if (window.FB && containerRef.current) {\n        try {\n          window.FB.XFBML.parse(containerRef.current);\n          setStatus('loaded');\n        } catch (e) {\n          console.error(\"FB XFBML parse error:\", e);\n          setStatus('error');\n        }\n      }\n    };\n\n    // 2. Immediate check\n    if (window.FB) {\n      parseXFBML();\n      return;\n    }\n\n    // 3. Polling for Global SDK (loaded by RootLayout)\n    // We poll because we don't control the script loading anymore\n    const interval = setInterval(() => {\n      if (window.FB) {\n        parseXFBML();\n        clearInterval(interval);\n      }\n    }, 300); // Check every 300ms\n\n    // 4. Timeout (Stop polling after 10s - generous for lazy loading)\n    const timeout = setTimeout(() => {\n      clearInterval(interval);\n      if (status === 'loading') {\n        setStatus(prev => window.FB ? 'loaded' : 'error');\n      }\n    }, 10000);\n\n    return () => {\n      clearInterval(interval);\n      clearTimeout(timeout);\n    };\n  }, [url, theme]); // Re-run if URL or Theme changes\n\n  return (\n    <div className=\"mt-16 pt-8 border-t border-border w-full\" ref={containerRef}>\n      <h3 className=\"text-2xl font-bold mb-6\">Discussion</h3>\n      \n      <div className=\"min-h-[200px] w-full relative bg-background/50 rounded-lg overflow-hidden\">\n        \n        {/* Loading State */}\n        {status === 'loading' && (\n          <div className=\"absolute inset-0 flex items-center justify-center text-muted-foreground text-sm z-10 bg-background/50\">\n            Loading discussion...\n          </div>\n        )}\n\n        {/* Error State */}\n        {status === 'error' && (\n          <div className=\"absolute inset-0 flex flex-col items-center justify-center text-center p-6 z-10 bg-muted/20\">\n            <p className=\"text-sm font-medium mb-2\">Unable to load comments</p>\n            <p className=\"text-xs text-muted-foreground max-w-sm\">\n              Please disable your ad blocker or tracking protection to view the discussion.\n            </p>\n          </div>\n        )}\n\n        {/* Widget Container */}\n        <div \n          className=\"fb-comments\" \n          data-href={url} \n          data-width=\"100%\" \n          data-numposts=\"5\" \n          data-colorscheme={theme === \"dark\" ? \"dark\" : \"light\"}\n          data-lazy=\"true\" // Native Facebook Lazy Loading\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}