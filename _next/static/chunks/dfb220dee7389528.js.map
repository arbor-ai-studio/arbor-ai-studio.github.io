{"version":3,"sources":["turbopack:///[project]/components/ui/fade-in.tsx","turbopack:///[project]/components/facebook-comments.tsx"],"sourcesContent":["\"use client\"\n\nimport { motion, HTMLMotionProps } from \"framer-motion\"\nimport { ReactNode } from \"react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface FadeInProps extends HTMLMotionProps<\"div\"> {\n  children: ReactNode\n  delay?: number\n  duration?: number\n  className?: string\n  direction?: \"up\" | \"down\" | \"left\" | \"right\" | \"none\"\n}\n\nexport function FadeIn({\n  children,\n  delay = 0,\n  duration = 0.5,\n  className,\n  direction = \"up\",\n  ...props\n}: FadeInProps) {\n  const getInitial = () => {\n    switch (direction) {\n      case \"up\": return { opacity: 0, y: 40 }\n      case \"down\": return { opacity: 0, y: -40 }\n      case \"left\": return { opacity: 0, x: 40 }\n      case \"right\": return { opacity: 0, x: -40 }\n      case \"none\": return { opacity: 0 }\n      default: return { opacity: 0, y: 40 }\n    }\n  }\n\n  const getAnimate = () => {\n    switch (direction) {\n      case \"up\": return { opacity: 1, y: 0 }\n      case \"down\": return { opacity: 1, y: 0 }\n      case \"left\": return { opacity: 1, x: 0 }\n      case \"right\": return { opacity: 1, x: 0 }\n      case \"none\": return { opacity: 1 }\n      default: return { opacity: 1, y: 0 }\n    }\n  }\n\n  return (\n    <motion.div\n      initial={getInitial()}\n      whileInView={getAnimate()}\n      viewport={{ once: true, margin: \"-50px\" }}\n      transition={{ duration, delay, ease: \"easeOut\" }}\n      className={cn(className)}\n      {...props}\n    >\n      {children}\n    </motion.div>\n  )\n}\n","\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { useTheme } from \"next-themes\";\n\ndeclare global {\n  interface Window {\n    FB: {\n      XFBML: {\n        parse: (node?: HTMLElement) => void;\n      };\n      init: (options: any) => void;\n    };\n    fbAsyncInit: () => void;\n  }\n}\n\ninterface FacebookCommentsProps {\n  url: string;\n}\n\nexport function FacebookComments({ url }: FacebookCommentsProps) {\n  const { theme } = useTheme();\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [status, setStatus] = useState<'loading' | 'loaded' | 'error'>('loading');\n\n  useEffect(() => {\n    // 1. Check if FB is already ready\n    if (window.FB) {\n      setStatus('loaded');\n      return;\n    }\n\n    // 2. Setup Async Init (The official way to wait for SDK)\n    // We wrap the existing handler if any, to play nice with others\n    const previousAsyncInit = window.fbAsyncInit;\n    window.fbAsyncInit = function() {\n      if (previousAsyncInit) previousAsyncInit();\n      setStatus('loaded');\n      // We don't need to call FB.init here strictly for XFBML, \n      // as XFBML parsing usually happens automatically or manually.\n      // But standard init is good practice:\n      window.FB.init({\n        xfbml: true,\n        version: 'v24.0'\n      });\n    };\n\n    // 3. Inject Script if missing\n    if (!document.getElementById(\"facebook-jssdk\")) {\n      const fbRoot = document.getElementById(\"fb-root\");\n      if (!fbRoot) {\n        const div = document.createElement(\"div\");\n        div.id = \"fb-root\";\n        document.body.appendChild(div);\n      }\n\n      const script = document.createElement(\"script\");\n      script.id = \"facebook-jssdk\";\n      script.src = \"https://connect.facebook.net/en_US/sdk.js\";\n      script.async = true;\n      script.defer = true;\n      script.crossOrigin = \"anonymous\";\n      \n      script.onerror = () => setStatus('error');\n      \n      document.body.appendChild(script);\n    }\n\n    // 4. Fallback Timeout (3s)\n    const timer = setTimeout(() => {\n      setStatus(prev => {\n        // If still loading after 3s, assume blocked or failed\n        if (prev === 'loading') {\n          // Double check if FB appeared magically\n          return window.FB ? 'loaded' : 'error';\n        }\n        return prev;\n      });\n    }, 3000);\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  useEffect(() => {\n    // Re-parse when URL changes, Theme changes, or SDK loads\n    if (status === 'loaded' && window.FB && containerRef.current) {\n      // We need to re-parse because React might have re-created the DOM nodes\n      // or the URL attribute changed.\n      window.FB.XFBML.parse(containerRef.current);\n    }\n  }, [url, theme, status]);\n\n  return (\n    <div className=\"mt-16 pt-8 border-t border-border w-full\" ref={containerRef}>\n      <h3 className=\"text-2xl font-bold mb-6\">Discussion</h3>\n      \n      <div className=\"min-h-[200px] w-full relative bg-background/50 rounded-lg overflow-hidden\">\n        \n        {/* Loading */}\n        {status === 'loading' && (\n          <div className=\"absolute inset-0 flex items-center justify-center text-muted-foreground text-sm z-10 bg-background/50\">\n            Loading discussion...\n          </div>\n        )}\n\n        {/* Error */}\n        {status === 'error' && (\n          <div className=\"absolute inset-0 flex flex-col items-center justify-center text-center p-6 z-10 bg-muted/20\">\n            <p className=\"text-sm font-medium mb-2\">Unable to load comments</p>\n            <p className=\"text-xs text-muted-foreground max-w-sm\">\n              Please disable your ad blocker or tracking protection to view the discussion.\n            </p>\n          </div>\n        )}\n\n        {/* Widget */}\n        <div \n          className=\"fb-comments\" \n          data-href={url} \n          data-width=\"100%\" \n          data-numposts=\"5\" \n          data-colorscheme={theme === \"dark\" ? \"dark\" : \"light\"}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}